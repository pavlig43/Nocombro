# üì¢ –í–∞–∂–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è: Pre-commit Detekt Hooks

## –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å?

–í –ø—Ä–æ–µ–∫—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ pre-commit hooks** –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–¥–∞ —á–µ—Ä–µ–∑ Detekt.

## üéØ –ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ?

- ‚úÖ –ï–¥–∏–Ω—ã–π code style –¥–ª—è –≤—Å–µ–π –∫–æ–º–∞–Ω–¥—ã
- ‚úÖ –†–∞–Ω–Ω–µ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ (–¥–æ PR/CI)
- ‚úÖ –ê–≤—Ç–æ—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
- ‚úÖ –ú–µ–Ω—å—à–µ –ø—Ä–∞–≤–æ–∫ –≤ code review

---

## üöÄ –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å (–û–î–ò–ù –†–ê–ó)

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –ü—Ä–æ—Å—Ç–æ –∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ –∏ —Å–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç
git pull origin master
./gradlew build
```

Gradle –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç hooks –ø—Ä–∏ –ø–µ—Ä–≤–æ–π —Å–±–æ—Ä–∫–µ!

–í—ã —É–≤–∏–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:
```
‚ö†Ô∏è  Git hooks not found. Installing automatically...
‚úÖ Git pre-commit hook installed (Windows)
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –í—Ä—É—á–Ω—É—é

```bash
./gradlew installGitHooks
```

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É

```bash
# Linux/macOS
ls -la .git/hooks/pre-commit

# Windows
dir .git\hooks\pre-commit
```

---

## üîÑ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–µ–ø–µ—Ä—å

### –ü—Ä–∏ –∫–æ–º–º–∏—Ç–µ –∫–æ–¥–∞

```bash
git add .
git commit -m "feat: my new feature"
```

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è:**
1. Detekt formatting (–∞–≤—Ç–æ—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
2. Detekt check (–ø—Ä–æ–≤–µ—Ä–∫–∞)

**–ï—Å–ª–∏ –æ—à–∏–±–æ–∫ –Ω–µ—Ç:**
```
Running pre-commit hooks...
Running Detekt (formatting + check)...
Pre-commit checks passed!

[master abc1234] feat: my new feature
```

**–ï—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∏:**
```
Running Detekt...
Analysis failed with 3 weighted issues

Detekt found issues in your code!
Please fix the issues and try again.
```

–ö–æ–º–º–∏—Ç –±—É–¥–µ—Ç –æ—Ç–∫–ª–æ–Ω–µ–Ω. –ò—Å–ø—Ä–∞–≤—å—Ç–µ –æ—à–∏–±–∫–∏ –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ.

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

### 1. Detekt –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å –≤–∞—à –∫–æ–¥

Detekt —Å `autoCorrect=true` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –∫–æ–¥
- –£–ø—Ä–æ—â–∞–µ—Ç –≤—ã—Ä–∞–∂–µ–Ω–∏—è
- –£–¥–∞–ª—è–µ—Ç unused imports

**–ï—Å–ª–∏ Detekt —á—Ç–æ-—Ç–æ –∏–∑–º–µ–Ω–∏–ª:**
```bash
# –ö–æ–º–º–∏—Ç –ø—Ä–µ—Ä–≤–µ—Ç—Å—è —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º:
"Detekt made changes to your code!"

# –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:
git diff

# –î–æ–±–∞–≤—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
git add .

# –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –∫–æ–º–º–∏—Ç:
git commit -m "feat: my new feature"
```

### 2. –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å hook (—Ç–æ–ª—å–∫–æ –≤ –∫—Ä–∞–π–Ω–µ–º —Å–ª—É—á–∞–µ!)

```bash
git commit --no-verify -m "WIP: work in progress"
```

> ‚ö†Ô∏è –ù–µ –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª—è–π—Ç–µ! CI –≤—Å–µ —Ä–∞–≤–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç –≤–∞—à –∫–æ–¥.

### 3. –ó–∞–ø—É—Å–∫ Detekt –≤—Ä—É—á–Ω—É—é

```bash
# –í—Å–µ –º–æ–¥—É–ª–∏
./gradlew detektAll

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –º–æ–¥—É–ª—å
./gradlew :core:detektMain
```

---

## üîß –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### Hook –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç?

```bash
# –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ
./gradlew installGitHooks

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª
cat .git/hooks/pre-commit
```

### Windows: PowerShell –æ—à–∏–±–∫–∏

```powershell
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–ª–∏—Ç–∏–∫—É –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
Get-ExecutionPolicy

# –ï—Å–ª–∏ Restricted, –∏–∑–º–µ–Ω–∏—Ç–µ:
Set-ExecutionPolicy RemoteSigned -Scope CurrentUser
```

### Detekt –Ω–∞—Ö–æ–¥–∏—Ç false positives?

```kotlin
// –ü–æ–¥–∞–≤–∏—Ç–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–æ–¥–∞
@Suppress("MaxLineLength")
fun myVeryLongFunctionName() { ... }
```

–ò–ª–∏ –æ–±—Å—É–¥–∏—Ç–µ —Å –∫–æ–º–∞–Ω–¥–æ–π –∏–∑–º–µ–Ω–µ–Ω–∏–µ `default-detekt-config.yml`.

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: [CONTRIBUTING.md](../CONTRIBUTING.md)

- –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å —Å Detekt
- –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
- –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

---

## ‚ùì –í–æ–ø—Ä–æ—Å—ã?

**–ü–æ –≤—Å–µ–º –≤–æ–ø—Ä–æ—Å–∞–º –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫:**
- –°–æ–∑–¥–∞–π—Ç–µ Issue –Ω–∞ GitHub
- –ù–∞–ø–∏—à–∏—Ç–µ –≤ –∫–æ–º–∞–Ω–¥–Ω—ã–π —á–∞—Ç

---

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–π–º–µ—Ç 2 –º–∏–Ω—É—Ç—ã, –Ω–æ —Å—ç–∫–æ–Ω–æ–º–∏—Ç —á–∞—Å—ã –≤ –±—É–¥—É—â–µ–º! üöÄ**

---

_–î–∞—Ç–∞: 2026-02-06_
_–û—Ç: Development Team_
